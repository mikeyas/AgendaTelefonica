@{
    ViewBag.Title = "Criar Usuário";
}

<h2>Criar usuário</h2>
<div>

    @{
        if (System.Web.HttpContext.Current.User.Identity.IsAuthenticated
            && System.Web.HttpContext.Current.User.Identity.Name == "administrador")
        {
            int id = 0; 
            if (Request.QueryString.HasKeys())
            {
                id = Convert.ToInt32(Request.QueryString["id"]);
            }
            if (id != 0)
            {
                <h1>Editar o usuário :</h1>
                foreach (Usuario usuario in ViewBag.usuarios)
                {
                    if (usuario.Id == id)
                    {
                        using (Html.BeginForm())
                        {
                            <a>Digite o Usuário:</a> @Html.TextBox("login", usuario.Nome);
                            <a>Digite o E-mail:</a> @Html.TextBox("email", usuario.Email);
                            @Html.Hidden("id",usuario.Id)
                            <input type="submit" value="Enviar" />
                        }
                    }
                }
            }

            else
            {
                <h1>Criar um novo usuário:</h1>
                using (Html.BeginForm())
                {
                    <a>Digite o Usuário:</a> @Html.TextBox("login");
                    <a>Digite a Senha:</a> @Html.Password("senha");
                    <a>Repita a Senha:</a> @Html.Password("senha2");
                    <a>Digite o E-mail:</a> @Html.TextBox("email");
                    @Html.Hidden("id", "")
                    <input type="submit" value="Enviar" />
                }

            }
        }
        else
        {
        < h2 > @Html.ActionLink("Você não é ADMINISTRADOR!", "logoff", "Autenticacao") </ h2 >
        }
        }
</div>

